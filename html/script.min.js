(function(){"use strict";const r=k;(function(t,i){const n=k,b=t();for(;;)try{if(-parseInt(n(596))/1*(parseInt(n(438))/2)+parseInt(n(326))/3+-parseInt(n(264))/4*(parseInt(n(371))/5)+parseInt(n(497))/6*(-parseInt(n(465))/7)+-parseInt(n(559))/8*(-parseInt(n(388))/9)+-parseInt(n(390))/10+parseInt(n(513))/11*(parseInt(n(384))/12)===i)break;b.push(b.shift())}catch{b.push(b.shift())}})(B,479881);let y=[],_=null;function k(t,i){const n=B();return k=function(b,p){return b=b-244,n[b]},k(t,i)}const P={editor:{title:r(518),save:r(299),cancel:r(377),pageTitle:r(313),pageContent:r(521),addPage:"Add Page",removePage:r(444),movePageUp:"Move Page Up",movePageDown:r(302),noPages:r(383),urlPlaceholder:r(365),addUrlBtn:r(254),saveBtn:r(489),closeBtn:r(531),publishBtn:r(411),backToEditions:r(493),viewingEdition:r(429),alreadyPublished:r(373),readOnly:r(588)},confirmDialog:{title:"Confirm Action",message:r(280),yesBtn:"Yes",noBtn:"No"},reader:{prevBtn:r(297),nextBtn:r(310),closeBtn:"Close",pageAltText:"Magazine page"},editions:{createBtn:r(248),closeEditions:r(250),backToEditions:"Back to Editions",title:r(573),published:"Published",draft:r(366),view:"View",edit:r(451),delete:"Delete",createConfirm:"Confirm",createCancel:"Cancel",createTitle:r(248),editionTitle:r(574),editionTitlePlaceholder:r(279)},notifications:{saved:r(270),error:r(319),deleted:r(389),published:r(245),urlRequired:r(504),imageAdded:r(276)}};let g=P;function d(t,i){var b,p,w;const n=r;try{return((b=g[t])==null?void 0:b[i])||((p=P[t])==null?void 0:p[i])||n(256)+t+"."+i}catch(z){return console[n(336)](n(434)+t+"."+i+":",z),((w=P[t])==null?void 0:w[i])||n(256)+t+"."+i}}function I(){const t=r;try{$(t(260))[t(295)](d("editor",t(473))),$(t(423))[t(295)](d(t(312),t(522))),$(t(571))[t(295)](d(t(312),t(350))),$("#add-page-btn").text(d(t(312),"addPage")),$(t(282))[t(335)](t(320),d(t(312),t(585))),$("#add-url")[t(295)](d(t(312),t(441))),$(t(575))[t(295)](d(t(312),t(515))),$(t(286))[t(295)](d("editor","backToEditions")),$(t(296))[t(295)](d(t(274),t(473))),$("#create-edition")[t(295)](d(t(274),t(439))),$(t(325))[t(295)](d(t(274),"closeBtn")),$(t(303)).text(d(t(274),t(258))),$(t(367))[t(295)](d(t(274),t(430))),$(t(289))[t(295)](d(t(274),t(291))),$(t(499))[t(295)](d("editions",t(407))),$(t(440))[t(335)](t(320),d(t(274),t(453))),$(t(486)).text(d("reader","prevBtn")),$(t(376)).text(d(t(469),t(509))),$(t(556))[t(295)](d(t(469),t(350))),$(t(442))[t(295)](d(t(425),t(473))),$(t(487))[t(295)](d(t(425),t(347))),$(t(495))[t(295)](d(t(425),t(368))),$(t(340))[t(295)](d(t(425),"noBtn")),U()}catch(i){console.error(t(259),i)}}function B(){const t=["257vknpFo","#dee2e6","#page-list","notifications",`</div>
                    </div>
                `,"center","</div>","Edition published successfully","urlRequired",`</div>
                    <div class="edition-title">`,"Create New Edition","#current-edition-title","Close","getElementById",'<div class="magnifier"></div>',"keydown","Add Image","mainColor","Missing translation: ","#page-list .no-pages","createConfirm","Error initializing texts:","#editor-title","display","offset","each","140404zAHdtW",".url-input-area","trim","Error destroying sortable:","documentElement","toDataURL","Magazine saved successfully!","size",'" alt="Page ','" data-active="',"editions","#zoom-out","Image added successfully","key","Translations","Enter the title of the new edition","Are you sure you want to perform this action?","width",".url-input, #image-url","#editions-container","src","pointer","#back-to-editions","fillText","turn","#edition-dialog h2","Please enter an edition title","createTitle","is_active","textColor","onload","text","#editions-title","Previous","css","Save","page-thumbnail-placeholder","#magazine-info","Move Page Down","#create-edition-confirm","colors","push","sortable","Theme","pageY",`</div>
                </div>
            `,"Next",`">
                <div class="page-number">`,"editor","Page Title","https://fd-magazine/updatePageOrder",`
                    <div class="page-number-display">
                        <span id="current-page">1</span>/<span id="total-pages">`,"action",`
                <div id="magazine-info">
                    <div class="edition-badge">Edition #`,"#editor-container","An error occurred","placeholder","next","https://fd-magazine/savePages","style",'<button class="delete-btn" data-index="',"#close-editions","1808670IXfGIE","url(","ui-sortable","https://fd-magazine/closeEditor","find","append","Escape",'<div id="loading-overlay"><div class="spinner"></div><div>Loading magazine...</div></div>',"--slot-border-color","attr","error","hasClass","backToEditions","resize","#confirm-no","forEach","--main-color","pageX","read_only","#007bff","transform","message","accentColor","--accent-color","closeBtn","#66b3ff",`" onerror="this.src='`,"dark","custom","disabled","#current-page",'<button id="confirm-no">No</button>',"middle","isArray","#333333","neonShadow","img.page-image","https://raw.github.com/blasten/turn.js/master/demos/magazine/pages/04.jpg","Image Error","Enter image URL","Draft","#create-edition-cancel","yesBtn",`</span>
                    </div>
                    <button id="prev-btn" class="control-btn">
                        `,"click","5NiXwgU","accentColorDark","Already Published","0 0 10px rgba(0,0,0,0.5)","#total-pages","#next-btn","Cancel","previous",`
                        <div class="edition-title">`,"#0056b3","has-magnifier","no-repeat","No pages yet. Add some pages to get started!","9912NzgubC","offsetHeight",`
                    </button>
                `,"ready","45iOGFed","Edition deleted successfully","5037390cPBeLC",`</button>
            </div>
        `,"top","slotBorderColor","useCustomColors","edition_number","#page-list .page-thumbnail","glassEffect",`
                    <div class="page-wrapper">
                        <div class="page">
                            <img src="`,"sort",'" data-edition-number="',":visible","config",".magnifier","https://raw.github.com/blasten/turn.js/master/demos/magazine/pages/06.jpg","indexOf",".edition-card","editionTitle","visible",`
                    <button id="zoom-in" class="control-btn">Zoom +</button>
                    <button id="zoom-out" class="control-btn">Zoom -</button>
                `,"starting","Publish Edition","data","is_published","#add-url","img","move","createElement","block","viewingEdition",".edit-btn",'<div class="confirm-buttons">',"children","#save-changes","setProperty","confirmDialog","editionsUpdated","#create-edition",`
                <div class="page-wrapper">
                    <div class="page">
                        <div class="empty-content">
                            <h2>No content available</h2>
                            <p>This magazine has no pages yet.</p>
                        </div>
                    </div>
                </div>
            `,"Viewing Edition","createCancel",`
                    </button>
                    <button id="next-btn" class="control-btn">
                        `,"val","body","Error getting translation for ","destroy","bold 20px Arial",".controls","7156ZSNgmZ","createBtn","#edition-title","addUrlBtn","#confirm-title","--slot-background-color","Remove Page","https://FD-Magazine/getConfig","getContext","flex","<p>Are you sure you want to publish this edition? This will make it active and available to all players.</p>","edition","double","Edit",".page-number","editionTitlePlaceholder","delete","type","height","#ffffff","textBaseline","#f8f9fa","alt","insertAfter","page_number",'" data-published="',"success","1394554aNyNst","opacity 0.3s ease-in-out","hide","show","reader","#editor-status","#loading-overlay","read-only","title","#magazine-container","cursor",".delete-btn","--background-color","loadingPages","#flipbook","slotBackgroundColor","alreadyPublished","empty",`</div>
                        <div class="edition-number">Edition #`,"image/png","pageAltText","#prev-btn","#confirm-message","html","Save Changes","font","accentColorLight",'<div class="confirm-content">',"Back to Editions","pages","#confirm-yes","absolute","6DxfTrl","length","#edition-dialog label",'<div class="no-pages">No pages yet. Add your first page!</div>',`</div>
                        <div class="edition-date">Created: `,"keyup","edition-number","Please enter a valid image URL","toLocaleTimeString",`'" />
                        </div>
                    </div>
                `,"<h2>Publish Edition</h2>","1100","nextBtn","--text-color",`
                    </button>
                    <button id="close-btn" class="control-btn">
                        `,"view","17809oPqSKJ","#publish-btn","publishBtn",`">
                        `,`">
                <img src="`,"Magazine Editor","onerror","savingChanges","Page Content","saveBtn","openEditor","light","readOnly",'<div class="custom-confirm">',"--accent-color-light","deleteBtn","14px Arial","openMagazine","Close Editor","none","openEditions","rgba(255, 255, 255, 0.1)","scale(","--neon-shadow","#ff0000","#notification","https://fd-magazine/backToEditions","0 0 10px rgba(0, 123, 255, 0.5)","post","opacity",'<div class="no-pages">',"left","Edition #","https://fd-magazine/getEditionPages",".view-btn","#image-url","mouseleave","preventDefault","toLocaleDateString","remove","error success",`
            <div class="page-thumbnail" data-page-number="`,"https://fd-magazine/createEdition","#close-btn","--accent-color-dark","notify","315688sDCpcl","http",".draft-label","Failed to load image","2px solid white","https://fd-magazine/closeMagazine","stringify","default","backgroundColor","https://fd-magazine/publishEdition","closest","#edition-dialog","#close-editor","removeClass","Magazine Editions","Edition Title","#publish-edition","turning","darkMode","https://fd-magazine/closeEditions","prevBtn",`
                    <div class="page-thumbnail" data-page-id="`,"#zoom-in","editionPublished","map","notificationTimeout","urlPlaceholder","addClass","location","Read-Only","Active Edition","fillStyle","href","imageUrl","published",'<div class="status-label active">ACTIVE</div>',"min"];return B=function(){return t},B()}function U(){const t=r;$(".published-label")[t(295)](d("editions",t(593))),$(t(561))[t(295)](d(t(274),"draft")),$(t(547)).text(d("editions",t(512))),$(t(420))[t(295)](d(t(274),"edit")),$(t(476)).text(d(t(274),t(454))),$(t(362))[t(335)](t(460),d(t(469),t(485)))}window.addEventListener("message",function(t){const i=r;t[i(412)][i(402)]&&(g=t[i(412)][i(402)][i(278)]||P,I(),t[i(412)][i(402)][i(307)]&&N(t.data[i(402)]))});function N(t){const i=r,n=document[i(268)];let b;const p={mainColor:i(457),textColor:"#000000",backgroundColor:"#ffffff",accentColor:i(345),accentColorLight:i(351),accentColorDark:i(380),slotBackgroundColor:i(459),slotBorderColor:i(597),neonShadow:i(540),glassEffect:i(534)};t&&t.Theme?t.Theme[i(394)]&&t[i(307)][i(304)]&&t[i(307)][i(304)].custom?b=t.Theme.colors[i(354)]:t[i(307)][i(304)]?b=t[i(307)][i(577)]?t[i(307)].colors[i(353)]:t[i(307)][i(304)][i(524)]:b=p:b=p,n[i(323)][i(424)](i(342),b.mainColor||p[i(255)]),n[i(323)][i(424)](i(510),b[i(293)]||p[i(293)]),n[i(323)][i(424)](i(477),b[i(567)]||p[i(567)]),n[i(323)].setProperty(i(349),b[i(348)]||p[i(348)]),n[i(323)][i(424)](i(527),b[i(491)]||p[i(491)]),n.style[i(424)](i(557),b.accentColorDark||p[i(372)]),n.style[i(424)](i(443),b[i(480)]||p[i(480)]),n.style[i(424)](i(334),b[i(393)]||p[i(393)]),n[i(323)].setProperty(i(536),b[i(361)]||p[i(361)]),n[i(323)][i(424)]("--glass-effect",b[i(397)]||p[i(397)])}$(document)[r(387)](function(){const t=r;I(),$[t(541)](t(445),JSON[t(565)]({}))}),$(document)[r(387)](function(){const t=r;$[t(541)](t(445),JSON[t(565)]({}));var i=document[t(251)]("flipbook");function n(){const e=t;$(e(260)).text(g.editor.title),$(e(548))[e(335)](e(320),g[e(312)][e(585)]),$(e(414))[e(295)](g.editor[e(441)]),$(e(423))[e(295)](g[e(312)][e(522)]),$(e(571)).text(g[e(312)][e(350)]),$(e(442))[e(295)](g[e(425)][e(473)]),$(e(487))[e(295)](g[e(425)][e(347)]),$(e(495))[e(295)](g.confirmDialog[e(368)]),$(e(340)).text(g[e(425)].noBtn),$(e(486))[e(498)]&&$(e(486)).text(g[e(469)].prevBtn),$(e(376))[e(498)]&&$(e(376))[e(295)](g.reader[e(509)]),$(e(556))[e(498)]&&$(e(556))[e(295)](g.reader[e(350)])}function b(){$("#flipbook img").each(function(){const e=k,x=$(this);x[e(412)](e(381))||(x[e(412)](e(381),!0),x.on("mousemove",function(a){const o=e,c=$(this),f=c[o(262)](),h=a[o(343)]-f[o(544)],u=a[o(308)]-f[o(392)],s=150,l=2,v=c.width(),m=c[o(456)]();let E=c[o(321)](o(403));!E[o(498)]&&(E=$(o(252))[o(461)](c),E[o(298)]({width:s+"px",height:s+"px",backgroundImage:o(327)+c.attr(o(284))+")",backgroundRepeat:o(382),position:o(496),border:o(563),borderRadius:"50%",boxShadow:o(374),pointerEvents:o(532),display:o(532)}));const C=Math.max(0,Math[o(595)](h-s/2,v-s)),T=Math.max(0,Math[o(595)](u-s/2,m-s)),J=h/v*100,R=u/m*100;E[o(298)]({left:C+"px",top:T+"px",backgroundPosition:J+"% "+R+"%",backgroundSize:v*l+"px "+m*l+"px",display:"block"})}),x.on(e(549),function(){const a=e;$(this).next(".magnifier")[a(467)]()}))})}function p(){const e=t,x=$(e(479));x[e(482)](),x[e(412)]()[e(288)]&&x[e(288)](e(435)),_&&($(e(301))[e(552)](),$(e(474)).append(e(317)+_.edition_number+e(247)+_.title+e(309))),$(e(474))[e(331)](e(333)),y&&y[e(498)]>0?[...y][e(399)]((s,l)=>(s.page_number||0)-(l[e(462)]||0)).forEach(s=>{const l=e;x[l(331)](l(398)+s[l(592)]+`" 
                                 draggable="false" 
                                 alt=""
                                 style="width: 100%; height: 100%; object-fit: cover;" 
                                 onerror="this.src='`+S+l(506))}):x[e(331)](e(428));const a=x.find(e(415));let o=0;const c=a[e(498)];if(c===0){f();return}a[e(263)](function(){const u=e,s=new Image;s[u(294)]=function(){o++,o===c&&f()},s[u(519)]=function(){o++,o===c&&f()},s[u(284)]=$(this)[u(335)](u(284))});function f(){const u=e;$(u(471)).fadeOut(300,function(){const s=u;$(this)[s(552)]()}),setTimeout(()=>{const s=u,l=$("#flipbook");l.data()[s(288)]&&l[s(288)](s(435)),l[s(288)]({width:1200,height:800,autoCenter:!0,display:s(450),acceleration:!0,gradients:!0,elevation:50,pages:l[s(422)]()[s(498)],when:{turning:function(m,E,C){const T=s;$(this)[T(586)](T(576))},turned:function(m,E,C){const T=s;$(this)[T(572)](T(576)),h(E,l[T(288)]("pages")),b()},start:function(m,E){const C=s;$(this)[C(586)]("starting")},end:function(m,E){const C=s;$(this)[C(572)](C(410))}}}),setTimeout(()=>{const m=s;l[m(288)](m(271),l[m(281)](),l[m(456)]()),l.turn("page",1)},100),b(),$(s(437))[s(488)](s(315)+l.turn(s(494))+s(369)+g[s(469)][s(579)]+s(431)+g[s(469)].nextBtn+s(511)+g[s(469)].closeBtn+s(386)),$(s(486))[s(370)](()=>l[s(288)](s(378))),$(s(376))[s(370)](()=>l.turn("next")),$(s(556))[s(370)](()=>$[s(541)](s(564),{})),$(s(437)).append(s(409));let v=1;$(s(581))[s(370)](()=>{const m=s;v<1.5&&(v+=.1,l[m(298)](m(346),m(535)+v+")"))}),$(s(275))[s(370)](()=>{const m=s;v>.5&&(v-=.1,l[m(298)](m(346),m(535)+v+")"))}),l.css(s(542),"0"),setTimeout(()=>{l[s(298)]({opacity:"1",transition:"opacity 0.5s ease-in-out"})},100)},100)}function h(u,s){const l=e;$(l(356)).text(u),$(l(375))[l(295)](s)}}function w(e,x=t(464)){const a=t,o=$(a(538));o[a(295)](e),o[a(572)](a(553))[a(586)](x+" visible");const c=x===a(336)?5e3:3e3;window[a(584)]&&clearTimeout(window[a(584)]),window[a(584)]=setTimeout(()=>{const f=a;o[f(572)](f(408)),setTimeout(()=>{o[f(295)]("")},300)},c)}window.addEventListener(t(347),function(e){const x=t,a=e.data;if(a[x(402)]&&(N(a[x(402)]),g=a[x(402)][x(278)],n()),a[x(316)]===x(530))y=a[x(494)]||[],_=a.edition||null,$(x(474))[x(298)](x(542),"0")[x(468)](),p(),z(!0,!0),setTimeout(()=>{const o=x;$(o(474))[o(298)]({opacity:"1",transition:o(466)});const c=$(o(479));c[o(412)]()[o(288)]&&c.turn(o(271),c[o(281)](),c[o(456)]()),b()},300);else if(a.action===x(533))$("#editions-container")[x(298)]({display:x(447),opacity:"0"})[x(586)](x(408)),$(x(283))[0][x(385)],$(x(283)).css("opacity","1"),z(!0,!0),A(a[x(274)]||[]);else if(a[x(316)]===x(426))$(x(283)).is(x(401))?A(a.editions||[]):($("#editions-container").css({display:"flex",opacity:"0"}).addClass("visible"),$("#editions-container")[0][x(385)],$(x(283)).css(x(542),"1"),A(a[x(274)]||[]));else if(a[x(316)]===x(523)){const o=$(x(598));if(o[x(337)](x(328)))try{o[x(306)](x(435))}catch(c){console[x(336)](x(267),c)}$(x(283))[x(572)](x(408)).css(x(261),"none"),$(x(318))[x(298)]({display:x(418),opacity:"0"})[x(586)]("visible"),$(x(318))[0][x(385)],$(x(318))[x(298)](x(542),"1"),y=Array[x(359)](a[x(494)])?a[x(494)]:[],a[x(449)]&&(_=a[x(449)],M(a[x(344)],a[x(449)]),$(x(249))[x(295)](x(545)+a[x(449)].edition_number),a[x(344)]?($(x(265)).hide(),$(x(423))[x(467)](),a[x(449)][x(413)]?$("#publish-edition")[x(586)](x(355))[x(295)]("Already Published"):$(x(575))[x(572)]("disabled")[x(295)]("Publish Edition")):($(x(265))[x(468)](),$(x(423))[x(468)](),a[x(449)][x(413)]?$(x(575))[x(586)](x(355))[x(295)](x(373)):$("#publish-edition")[x(572)](x(355))[x(295)](x(411)))),z(!0,!0),setTimeout(()=>{L(a[x(344)])},200)}else if(a[x(316)]===x(467))$(x(474))[x(298)](x(542),"0"),setTimeout(()=>{const o=x;$("#magazine-container")[o(467)]()},300),$(x(318))[x(572)](x(408))[x(298)]({opacity:"0",display:x(532)}),$(x(283))[x(572)](x(408))[x(298)]({opacity:"0",display:x(532)}),$(x(570))[x(467)](),$(x(479))[x(412)]()[x(288)]&&$(x(479))[x(288)](x(435)),z(!1,!1);else if(a[x(316)]===x(558)){w(a[x(347)],a[x(455)]||"success");return}else a.action===x(582)&&_&&a[x(449)]&&_[x(395)]===a.edition[x(395)]&&(_=a[x(449)],$("#publish-edition")[x(586)]("disabled")[x(295)](x(589)),w("Edition published and set as active!",x(464)))});function z(e,x){const a=t;$[a(541)]("https://fd-magazine/setNuiFocus",JSON.stringify({focus:e,cursor:x}))}function A(e){const x=t,a=$("#editions-list");a[x(482)](),e&&e.length>0?e[x(341)](o=>{const c=x,f=o[c(413)]?c(593):"",h=o[c(292)]?"active":"",u=new Date(o.created_at),s=u[c(551)]()+" "+u[c(505)]();let l="";o[c(292)]==1?l=c(594):o[c(413)]==1&&(l='<div class="status-label published">PUBLISHED</div>'),a[c(331)](`
                    <div class="edition-card `+f+" "+h+c(400)+o[c(395)]+c(463)+(o.is_published||!1)+c(273)+(o[c(292)]||!1)+c(516)+l+c(379)+o[c(473)]+c(483)+o[c(395)]+c(501)+s+c(600))}):a[x(331)](`
                <div class="no-editions">
                    <p>No editions found. Create your first edition!</p>
                </div>
            `)}$(document).on(t(370),t(406),function(){const e=t,x=$(this).data(e(503)),a=$(this).data(e(593));$(e(283))[e(298)]({opacity:"0",transition:"opacity 0.3s ease-in-out"}),$[e(541)](e(546),JSON[e(565)]({edition_number:x,read_only:a}))}),$(t(427)).on(t(370),function(){const e=t;$("#edition-dialog")[e(468)]()}),$(t(303)).on(t(370),function(){const e=t,x=$(e(440))[e(432)]()[e(266)]();if(!x){w(e(290),e(336));return}$[e(541)](e(555),JSON[e(565)]({title:x})),$(e(570))[e(467)](),$(e(440))[e(432)]("")}),$(t(367)).on(t(370),function(){const e=t;$(e(570))[e(467)](),$(e(440)).val("")}),$("#close-editions").on(t(370),function(){const e=t;$("#editions-container")[e(572)](e(408))[e(298)]({opacity:"0"}),setTimeout(()=>{const x=e;$(x(283))[x(298)](x(261),x(532))},300),$[e(541)](e(578),{})}),$(t(286)).on(t(370),function(){const e=t;$(e(318)).removeClass(e(408))[e(298)]({display:e(532),opacity:"0"}),$("#editions-container").css({display:e(447),opacity:"0","z-index":e(508)})[e(586)](e(408)),$(e(283))[0][e(385)],$(e(283))[e(298)]("opacity","1"),$.post(e(539),{})});function O(){const e=t,x=document[e(417)]("canvas");x[e(281)]=200,x[e(456)]=130;const a=x[e(446)]("2d");return a[e(590)]=e(360),a.fillRect(0,0,x[e(281)],x.height),a[e(590)]=e(537),a[e(490)]=e(436),a.textAlign=e(601),a[e(458)]=e(358),a[e(287)](e(364),x[e(281)]/2,x[e(456)]/2-15),a[e(590)]=e(457),a[e(490)]=e(529),a[e(287)](e(562),x.width/2,x[e(456)]/2+15),x[e(269)](e(484))}const S=O();function j(e,x){const a=t;let o=0;const c=e.length;if(c===0){x();return}e[a(341)](f=>{const h=a,u=new Image;u[h(294)]=function(){o++,o===c&&x()},u[h(519)]=function(){o++,o===c&&x()},u.src=f}),setTimeout(()=>{o<c&&x()},5e3)}function L(e){const x=t;$("#editor-container")[x(298)]({display:x(447),opacity:"1"}).addClass(x(408));const a=$(x(598));if(a[x(337)](x(328)))try{a[x(306)](x(435))}catch{}if(e?(a[x(586)](x(472)),$(x(260))[x(295)](d(x(312),x(419))),$(x(514))[x(467)](),$(x(286))[x(468)]()[x(295)](d(x(312),x(338))),$(x(470))[x(468)]().text(d(x(312),x(525)))):(a[x(572)](x(472)),$(x(260)).text(d(x(312),x(473))),$(x(514)).show()[x(295)](d(x(312),x(515))),$(x(286)).show()[x(295)](d(x(312),x(338))),$(x(470))[x(467)]()),a[x(482)](),!Array[x(359)](y)||y[x(498)]===0){a[x(488)](x(543)+d(x(312),"noPages")+x(244));return}const o=[...y][x(399)]((f,h)=>(f.page_number||0)-(h[x(462)]||0)),c=o[x(583)](f=>f[x(592)]);a.html(x(543)+d(x(312),x(478))+x(244)),j(c,function(){const f=x;let h="";if(o[f(341)]((u,s)=>{const l=f,v=e?"":l(324)+s+'">×</button>';h+=l(580)+u.id+'" data-page-number="'+(u.page_number||s)+`">
                        <img src="`+u[l(592)]+l(272)+(s+1)+l(352)+S+`'">
                        <div class="page-number">`+(s+1)+`</div>
                        `+v+`
                    </div>
                `}),a[f(488)](h),!e)a[f(306)]({placeholder:f(300),tolerance:"pointer",cursor:f(416),update:function(u,s){D()}}),$(".page-thumbnail")[f(298)](f(475),f(416));else if(a[f(586)]("read-only"),$(".page-thumbnail").css(f(475),f(566)),a[f(337)]("ui-sortable"))try{a[f(306)]("disable")}catch{}})}function D(){const e=t,x=[];$(e(396))[e(263)](function(a){const o=e,c=$(this).data("page-id");x[o(305)]({id:c,order:a}),$(this)[o(330)](".page-number")[o(295)](a+1)}),$[e(541)](e(314),JSON.stringify({pages:x,edition_number:_?_[e(395)]:1}))}$(t(414)).on(t(370),function(){const e=t,x=$(e(548))[e(432)]()[e(266)]();if(!x){w(g[e(599)][e(246)],"error");return}$(e(257)).length>0&&$(e(598))[e(482)]();const a=$(e(396))[e(498)];$(e(598))[e(331)](e(554)+a+e(517)+x+'" alt="'+g.editor.pageAltText+" "+(a+1)+e(311)+(a+1)+`</div>
                <button class="delete-btn" data-index="`+a+'">'+g[e(312)][e(528)]+e(391)),$("#image-url")[e(432)](""),w(g[e(599)].imageAdded,e(464)),a===0&&$(e(598)).sortable({placeholder:e(300),tolerance:e(285),cursor:"move",update:function(o,c){D()}})}),$(document).on(t(370),t(476),function(){const e=t;$(this)[e(569)](".page-thumbnail")[e(552)](),$(e(396))[e(263)](function(x){const a=e;$(this)[a(330)](a(452))[a(295)](x+1)}),$(e(396))[e(498)]===0&&$(e(598)).html(e(500))}),$("#save-changes").on(t(370),function(){const e=t,x=[];$(e(396)).each(function(a){const o=e;x[o(305)]({imageUrl:$(this)[o(330)]("img")[o(335)]("src"),page_number:a})}),$[e(541)](e(322),JSON[e(565)]({pages:x,edition_number:_?_.edition_number:1})),w(g.notifications[e(520)],"success")}),$(t(571)).on(t(370),function(){const e=t;$("#editor-container")[e(572)]("visible")[e(298)](e(261),e(532)),$[e(541)](e(329),{})}),$(t(575)).on(t(370),function(){const e=t;if($(this)[e(337)](e(355)))return;const x=$(e(526)+e(492)+e(507)+e(448)+e(421)+'<button id="confirm-yes">Yes</button>'+e(357)+e(244)+"</div>"+e(244));$(e(433))[e(331)](x),x[e(586)]("visible"),$("#confirm-yes").on("click",function(){const a=e;$.post(a(568),JSON[a(565)]({edition_number:_[a(395)]})),$("#publish-edition")[a(586)](a(355))[a(295)]("Active Edition"),x.removeClass("visible"),setTimeout(()=>{x[a(552)]()},300)}),$(e(340)).on(e(370),function(){const a=e;x.removeClass(a(408)),setTimeout(()=>{x[a(552)]()},300)})}),$(document)[t(253)](function(e){const x=t,a=$("#flipbook");switch(e.keyCode){case 37:a.turn(x(378)),e[x(550)]();break;case 39:a.turn(x(321)),e[x(550)]();break}}),window.addEventListener(t(339),function(e){const x=t;i.style&&(i.style[x(281)]="",i[x(323)].height="",$(i).turn(x(271),i.clientWidth,i.clientHeight))}),window[t(587)][t(591)][t(405)](t(560))===0?(y=[{imageUrl:"https://raw.github.com/blasten/turn.js/master/demos/magazine/pages/01.jpg"},{imageUrl:"https://raw.github.com/blasten/turn.js/master/demos/magazine/pages/02.jpg"},{imageUrl:"https://raw.github.com/blasten/turn.js/master/demos/magazine/pages/03.jpg"},{imageUrl:t(363)},{imageUrl:"https://raw.github.com/blasten/turn.js/master/demos/magazine/pages/05.jpg"},{imageUrl:t(404)}],$("#magazine-container")[t(468)](),p()):y=[],$("#magazine-container, #editor-container")[t(467)](),$(document)[t(502)](function(e){const x=t;e[x(277)]===x(332)&&($(x(474))[x(467)](),$(x(479)).data()[x(288)]&&$("#flipbook").turn(x(435)),$[x(541)]("https://fd-magazine/closeMagazine",JSON[x(565)]({}),function(){z(!1,!1)}))}),n()});function M(t,i){const n=r;t?($(n(260))[n(295)](d(n(312),n(419))+": "+i.title),$(n(265))[n(467)](),$(n(423)).hide(),i.is_published?$(n(575))[n(586)](n(355))[n(295)](d(n(312),n(481))):$("#publish-edition")[n(572)](n(355))[n(295)](d("editor",n(515))),$(n(470))[n(468)]()[n(295)](d(n(312),n(525))),$(n(286))[n(468)]()[n(295)](d(n(312),n(338))),$("#page-list")[n(586)](n(472))):($(n(260)).text(d(n(312),n(473))+": "+i[n(473)]),$(n(265))[n(468)](),$(n(423))[n(468)](),i[n(413)]?$(n(575)).addClass(n(355))[n(295)](d(n(312),n(481))):$(n(575))[n(572)]("disabled")[n(295)](d("editor",n(515))),$("#editor-status")[n(467)](),$(n(286))[n(468)]()[n(295)](d(n(312),n(338))),$(n(598)).removeClass("read-only"))}})();
